"use strict";var WPFormsAdminFormTemplates=window.WPFormsAdminFormTemplates||function(a,s){let o={init:function(){s(o.ready)},ready:function(){o.events()},events:function(){s(".wpforms-form-setup-content").on("keyup","#wpforms-setup-template-search",_.debounce(WPFormsFormTemplates.searchTemplate,200)).on("click",".wpforms-setup-templates-categories li div",WPFormsFormTemplates.selectCategory).on("click",".wpforms-setup-templates-categories li .chevron",WPFormsFormTemplates.toggleSubcategoriesList).on("click",".wpforms-setup-templates-subcategories li",WPFormsFormTemplates.selectSubCategory).on("click",".wpforms-template-select",o.selectTemplate).on("click",".wpforms-trigger-blank",o.selectBlankTemplate)},selectTemplate(e){e.preventDefault();e=s(this);e.hasClass("education-modal")||(e.data("template").match(/wpforms-user-template-(\d+)/)&&e.data("create-url")?a.location.href=e.data("create-url"):(s(".wpforms-form-setup-content").find(".wpforms-template").removeClass("active"),e.closest(".wpforms-template").addClass("active"),e.data("labelOriginal",e.html()),e.html('<i class="wpforms-loading-spinner wpforms-loading-white wpforms-loading-inline"></i>'+wpforms_admin.loading),WPFormsFormTemplates.selectTemplateProcess(e.data("template-name-raw"),e.data("template"),e,o.selectTemplateProcessAjax)))},selectBlankTemplate:function(e){e.preventDefault(),o.selectTemplateProcessAjax("Blank Form","blank")},selectTemplateProcessAjax:function(t,e){e={title:t,action:"wpforms_new_form",template:e,form_id:0,nonce:wpforms_admin_form_templates.nonce};s.post(wpforms_admin.ajax_url,e).done(function(e){e.success?a.location.href=e.data.redirect:"invalid_template"===e.data.error_type?o.selectTemplateProcessInvalidTemplateError(e.data.message,t):o.selectTemplateProcessError(e.data.message)}).fail(function(e,t,a){o.selectTemplateProcessError("")})},selectTemplateProcessInvalidTemplateError(e,t){s.alert({title:wpforms_admin.heads_up,content:e,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.use_default_template,btnClass:"btn-confirm",keys:["enter"],action(){o.selectTemplateProcessAjax(t,"simple-contact-form-template")}},cancel:{text:wpforms_admin.cancel,action(){WPFormsFormTemplates.selectTemplateCancel()}}}})},selectTemplateProcessError(e){s.alert({title:e,content:wpforms_admin.error_select_template,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"],action(){WPFormsFormTemplates.selectTemplateCancel()}}}})}};return o}((document,window),jQuery);WPFormsAdminFormTemplates.init();