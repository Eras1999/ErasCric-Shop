"use strict";function initPhotoSwipe(e){for(var t=!1,r=function(e){for(var t,r,i,n,l=e.childNodes,a=l.length,s=[],o=0;o<a;o++)1===(t=l[o]).nodeType&&(r=t.children[0]).getAttribute("href")&&(i=r.getAttribute("data-size").split("x"),n={src:r.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10)},r.children.length>0&&(n.msrc=r.children[0].getAttribute("src")),n.el=t,s.push(n));return s},i=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=(e.target||e.srcElement).closest(".product-images"),r=t.querySelectorAll(".image-item")[0];if(t.querySelector(".flickity-slider")&&(r=t.querySelector(".image-item.is-selected")),r){for(var i,n=r.parentNode,a=r.parentNode.childNodes,s=a.length,o=0,c=0;c<s;c++)if(1===a[c].nodeType){if(a[c]===r){i=o;break}o++}return i>=0&&l(i,n),!1}},n=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement;if("A"!==t.tagName.toUpperCase()){var r=function e(t,r){return t&&(r(t)?t:e(t.parentNode,r))}(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(r){for(var i,n=r.parentNode,a=r.parentNode.childNodes,s=a.length,o=0,c=0;c<s;c++)if(1===a[c].nodeType){if(a[c]===r){i=o;break}o++}return i>=0&&l(i,n),!1}}},l=function(e,i,n,l){var a,s,o,c,u=i.closest(".product-gallery");if(a=u.querySelector(".pswp")?u.querySelector(".pswp"):u.nextElementSibling,c=r(i),o={galleryUID:i.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=c[e].el.getElementsByTagName("img")[0],r=window.pageYOffset||document.documentElement.scrollTop,i=t.getBoundingClientRect();return{x:i.left,y:i.top+r,w:i.width}}},l){if(o.galleryPIDs){for(var d=0,p=c.length;d<p;d++)if(c[d].pid==e){o.index=d;break}}else o.index=parseInt(e,10)-1}else o.index=parseInt(e,10);!isNaN(o.index)&&(n&&(o.showAnimationDuration=0),(s=new PhotoSwipe(a,PhotoSwipeUI_Default,c,o)).init(),s.listen("gettingData",function(){if(!t){t=!0;var e=document.querySelectorAll(".pswp__thumbnails");e.length&&e.forEach(function(e){e.remove()}),setTimeout(function(){(function e(t){var r=t.scrollWrap,i=document.querySelector(".product-gallery"),n=document.createElement("div");if(n.classList.add("pswp__thumbnails"),i){var l=i.querySelector(".product-thumbnail-images-container");if(l){var a=l.querySelector(".flickity-slider");a?n.innerHTML=a.innerHTML:n.innerHTML=l.innerHTML}else Object.keys(t.items).forEach(function(e){var r=t.items[e],i=document.createElement("div"),l=document.createElement("img");l.setAttribute("src",r.msrc),i.classList.add("thumbnail-item"),i.appendChild(l),n.appendChild(i)});Object.keys(t.items).forEach(function(e){var r=n.children[e];r.removeAttribute("style"),r.classList.remove("is-selected","is-nav-selected"),t.getCurrentIndex()==e&&r.classList.add("active"),r.addEventListener("click",function(){t.goTo(t.items.indexOf(t.items[e]))})}),r.parentNode.insertBefore(n,r.nextSibling)}})(s)},200)}}),s.listen("close",function(){var e=s.scrollWrap.closest(".pswp").querySelector(".pswp__thumbnails");e&&(e.remove(),t=!1)}),s.listen("afterChange",function(){var e=s.scrollWrap.closest(".pswp").querySelector(".pswp__thumbnails");e&&Object.keys(s.items).forEach(function(t){var r=e.children[t];r.classList.remove("active"),s.getCurrentIndex()==t&&r.classList.add("active")})}))},a=document.querySelectorAll(e),s=0,o=a.length;s<o;s++){var c=a[s].closest(".product-images").querySelector(".photoswipe-toggle-button");a[s].setAttribute("data-pswp-uid",s+1),c.onclick=i,a[s].onclick=n}}initPhotoSwipe(".product-images-container");